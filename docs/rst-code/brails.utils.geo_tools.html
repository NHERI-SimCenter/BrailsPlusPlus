

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>brails.utils.geo_tools module &mdash; BRAILS++  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="brails.utils.importer module" href="brails.utils.importer.html" />
    <link rel="prev" title="brails.utils.arcgisapi_service_helper module" href="brails.utils.arcgisapi_service_helper.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            BRAILS++
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rst-doc/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst-doc/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="brails.html">brails package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="brails.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="brails.filters.html">brails.filters package</a></li>
<li class="toctree-l3"><a class="reference internal" href="brails.imputers.html">brails.imputers package</a></li>
<li class="toctree-l3"><a class="reference internal" href="brails.inferers.html">brails.inferers package</a></li>
<li class="toctree-l3"><a class="reference internal" href="brails.processors.html">brails.processors package</a></li>
<li class="toctree-l3"><a class="reference internal" href="brails.scrapers.html">brails.scrapers package</a></li>
<li class="toctree-l3"><a class="reference internal" href="brails.types.html">brails.types package</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="brails.utils.html">brails.utils package</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="brails.utils.html#subpackages">Subpackages</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="brails.utils.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="brails.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rst-doc/acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst-doc/license.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst-doc/cite.html">How to Cite</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BRAILS++</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="brails.html">brails package</a></li>
          <li class="breadcrumb-item"><a href="brails.utils.html">brails.utils package</a></li>
      <li class="breadcrumb-item active">brails.utils.geo_tools module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/rst-code/brails.utils.geo_tools.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-brails.utils.geo_tools">
<span id="brails-utils-geo-tools-module"></span><h1>brails.utils.geo_tools module<a class="headerlink" href="#module-brails.utils.geo_tools" title="Link to this heading"></a></h1>
<p>This module defines a class for geospatial analysis and operations.</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#brails.utils.geo_tools.GeoTools" title="brails.utils.geo_tools.GeoTools"><code class="xref py py-obj docutils literal notranslate"><span class="pre">GeoTools</span></code></a>()</p></td>
<td><p>A collection of static methods for geospatial analysis and operations.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">brails.utils.geo_tools.</span></span><span class="sig-name descname"><span class="pre">GeoTools</span></span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A collection of static methods for geospatial analysis and operations.</p>
<p>The GeoTools class provides various utility functions to perform common
geospatial tasks, including distance calculations, polygon meshing,
plotting, and GeoJSON file handling. The methods leverage Shapely
geometries to operate on points and polygons, making it suitable for
geographical data manipulation and visualization.</p>
<p>To import the <a class="reference internal" href="#brails.utils.geo_tools.GeoTools" title="brails.utils.geo_tools.GeoTools"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoTools</span></code></a> class, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">brails.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeoTools</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.bbox2poly">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bbox2poly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.bbox2poly" title="Link to this definition"></a></dt>
<dd><p>Get the boundary polygon for a region based on its coordinates.</p>
<p>This method parses the provided bounding polygon coordinates into a
polygon object. The polygon  must be defined by at least two pairs of
longitude/latitude values (i.e., at least 4 elements) and must have an
even number of elements.  If a file name is provided in the <cite>outfile</cite>
argument, the resulting polygon is saved to a GeoJSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query_area</strong> (<em>tuple</em>) – A tuple containing longitude/latitude pairs that define a
bounding box. The tuple should contain at least two pairs of
coordinates (i.e., 4 values), and the number of elements must
be an even number.</p></li>
<li><p><strong>output_file</strong> (<em>str</em><em>, </em><em>optional</em>) – If a file name is provided, the resulting polygon will be
written to the specified file in GeoJSON format.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">query_area</span></code> is not a tuple.</p></li>
<li><p><strong>ValueError</strong> – If the tuple has an odd number of elements or fewer than two
    pairs.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>The bounding polygon as a Shapely Polygon.</p></li>
<li><p>A human-readable string representation of the bounding
polygon.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple[Polygon, str]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Simple bounding box (two coordinate pairs):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">brails.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">GeoTools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">122.3</span><span class="p">,</span> <span class="mf">37.85</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.25</span><span class="p">,</span> <span class="mf">37.9</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bpoly</span><span class="p">,</span> <span class="n">description</span> <span class="o">=</span> <span class="n">GeoTools</span><span class="o">.</span><span class="n">bbox2poly</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">bpoly</span><span class="p">)</span>
<span class="go">POLYGON ((-122.3 37.85, -122.3 37.9, -122.25 37.9, -122.25 37.85,</span>
<span class="go">          -122.3 37.85))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
<span class="go">the bounding box: (-122.3, 37.85, -122.25, 37.9)</span>
</pre></div>
</div>
<p>A triangular polygon:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">long_coords</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="o">-</span><span class="mf">122.3</span><span class="p">,</span> <span class="mf">37.85</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.28</span><span class="p">,</span> <span class="mf">37.86</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.26</span><span class="p">,</span> <span class="mf">37.87</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.25</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mf">37.9</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bpoly_long</span><span class="p">,</span> <span class="n">desc_long</span> <span class="o">=</span> <span class="n">GeoTools</span><span class="o">.</span><span class="n">bbox2poly</span><span class="p">(</span><span class="n">long_coords</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">bpoly_long</span><span class="p">)</span>
<span class="go">POLYGON ((-122.3 37.85, -122.28 37.86, -122.26 37.87, -122.25 37.9,</span>
<span class="go">-122.3 37.85))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">desc_long</span><span class="p">)</span>
<span class="go">the bounding polygon: [(-122.3, 37.85), (-122.28, 37.86),</span>
<span class="go">(-122.26, 37.87), (-122.25, 37.9)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.geometry_to_list_of_lists">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geometry_to_list_of_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geom</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.geometry_to_list_of_lists" title="Link to this definition"></a></dt>
<dd><p>Convert a Shapely geometry into a list of coordinate lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>geom</strong> (<em>BaseGeometry</em>) – A Shapely geometry (such as Point, Polygon)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of <code class="docutils literal notranslate"><span class="pre">[lon,</span> <span class="pre">lat]</span></code> values or nested list objects
for complex geometries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[List[float]] or List[List[List[float]]]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">geometry_to_list_of_lists</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>
<span class="go">[[1.0, 2.0]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">geometry_to_list_of_lists</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>
<span class="go">[[0.0, 0.0], [1.0, 0.0], [1.0, 1.0], [0.0, 1.0], [0.0, 0.0]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.haversine_dist">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">haversine_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.haversine_dist" title="Link to this definition"></a></dt>
<dd><p>Calculate the Haversine distance between two points.</p>
<p>This function computes the shortest distance over the earth’s surface
between two points specified by their latitude and longitude.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> (<em>tuple</em>) – The first point as a list containing two floating-point
values, where the first element is the latitude and the second
is the longitude of the point in degrees.</p></li>
<li><p><strong>p2</strong> (<em>tuple</em>) – The second point as a list containing two floating-point
values, where the first element is the latitude and the second
is the longitude of the point in degrees.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Haversine distance between the two points in feet.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="p">(</span><span class="mf">37.7749</span><span class="p">,</span> <span class="o">-</span><span class="mf">122.4194</span><span class="p">)</span>  <span class="c1"># San Francisco, CA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span> <span class="o">=</span> <span class="p">(</span><span class="mf">34.0522</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.2437</span><span class="p">)</span>  <span class="c1"># Los Angeles, CA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">GeoTools</span><span class="o">.</span><span class="n">haversine_dist</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="mi">5280</span><span class="p">)</span>  <span class="c1"># convert feet to miles</span>
<span class="go">347</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.match_points_to_polygons">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">match_points_to_polygons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polygons</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.match_points_to_polygons" title="Link to this definition"></a></dt>
<dd><p>Match points to polygons and return the correspondence data.</p>
<p>This function finds Shapely points that fall within given polygons.
If multiple points exist within a polygon, it selects the point closest
to the polygon’s centroid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> (<em>list</em><em>[</em><em>Point</em><em>]</em>) – A list of Shapely points</p></li>
<li><p><strong>polygons</strong> (<em>list</em><em>[</em><em>Polygon</em><em>]</em>) – A list of Shapely Polygons defined in EPSG 4326
(longitude, latitude).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>A list of matched Shapely points.</p></li>
<li><p>A dictionary mapping each polygon (represented as a string)
to the corresponding matched point.</p></li>
<li><p>A list of the indices of polygons matched to points, with
each index listed in the same order as the list of points.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list, dict, list]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.mesh_polygon">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mesh_polygon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polygon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cols</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.mesh_polygon" title="Link to this definition"></a></dt>
<dd><p>Split a Spolygon into a grid of individual rectangular polygons.</p>
<p>This function divides the area of the input polygon into a specified
number of rows and columns, creating a mesh of rectangular cells.
Each cell is checked for intersection with the input polygon, and
only the intersecting parts are returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>polygon</strong> (<em>Polygon</em>) – A Shapely Polygon to be meshed.</p></li>
<li><p><strong>rows</strong> (<em>int</em>) – The number of rows to divide the polygon into.</p></li>
<li><p><strong>cols</strong> (<em>int</em>) – The number of columns to divide the polygon into.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Shapely Polygons representing the individual
rectangular cells that mesh the <code class="docutils literal notranslate"><span class="pre">polygon</span></code> input.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[Polygon]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cells</span> <span class="o">=</span> <span class="n">GeoTools</span><span class="o">.</span><span class="n">mesh_polygon</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Access coordinates of first cell</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cells</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bounds</span>
<span class="go">(0.0, 0.0, 2.0, 1.5)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.parse_geojson_geometry">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_geojson_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.parse_geojson_geometry" title="Link to this definition"></a></dt>
<dd><p>Convert a GeoJSON geometry object into BRAILS asset coordinates.</p>
<p>This function standardizes coordinates of different GeoJSON geometry
types, such as <code class="docutils literal notranslate"><span class="pre">Point</span></code>, <code class="docutils literal notranslate"><span class="pre">MultiPoint</span></code>, <code class="docutils literal notranslate"><span class="pre">LineString</span></code>,
<code class="docutils literal notranslate"><span class="pre">MultiLineString</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygon</span></code>, and <code class="docutils literal notranslate"><span class="pre">MultiPolygon</span></code> into BRAILS
representation: a nested list of <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y]</span></code> coordinate pairs.</p>
<p>Depending on the geometry type, the return value may represent either
a single sequence of coordinate pairs (<code class="docutils literal notranslate"><span class="pre">list[list[float]]</span></code>) or a
collection of multiple coordinate sequences
(<code class="docutils literal notranslate"><span class="pre">list[list[list[float]]]</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>geometry</strong> (<em>dict</em>) – A GeoJSON geometry dictionary containing at least the keys
<code class="docutils literal notranslate"><span class="pre">&quot;type&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;coordinates&quot;</span></code>, e.g., <code class="docutils literal notranslate"><span class="pre">{&quot;type&quot;:</span> <span class="pre">&quot;Polygon&quot;,</span>
<span class="pre">&quot;coordinates&quot;:</span> <span class="pre">[[[x1,</span> <span class="pre">y1],</span> <span class="pre">[x2,</span> <span class="pre">y2],</span> <span class="pre">...]]}</span></code></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list[list[float]]</span></code> for geometries with a single coordinate
list (e.g., Point, LineString, Polygon).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list[list[list[float]]]</span></code> for geometries composed of
multiple coordinate sequences (e.g., MultiLineString,
MultiPolygon).</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[list[float]] or list[list[list[float]]]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If <code class="docutils literal notranslate"><span class="pre">geometry</span></code> is not a dictionary.</p></li>
<li><p><strong>ValueError</strong> – If the geometry is missing required keys.</p></li>
<li><p><strong>NotImplementedError</strong> – If the geometry type is unsupported.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">parse_geojson_geometry</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">[[10.0, 20.0]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">parse_geojson_geometry</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span>
<span class="go">         &quot;coordinates&quot;: [[0.0, 0.0], [1.0, 1.0]]</span>
<span class="go">         }</span>
<span class="go">... )</span>
<span class="go">[[0.0, 0.0], [1.0, 1.0]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">parse_geojson_geometry</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">[[[0, 0], [1, 1]], [[2, 2], [3, 3]]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">parse_geojson_geometry</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">[[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">parse_geojson_geometry</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;MultiPolygon&quot;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>         <span class="p">[[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]],</span>
<span class="gp">... </span>         <span class="p">[[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]]</span>
<span class="gp">... </span>     <span class="p">]}</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">[[[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]],</span>
<span class="go"> [[2, 2], [3, 2], [3, 3], [2, 3], [2, 2]]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.plot_polygon_cells">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">plot_polygon_cells</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bpoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rectangles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.plot_polygon_cells" title="Link to this definition"></a></dt>
<dd><p>Plot a polygon and its rectangular mesh, optionally saving the plot.</p>
<p>This function visualizes a Shapely Polygon or MultiPolygon along with
its rectangular mesh of cells. Each cell is plotted in blue, and the
base polygon is outlined in black.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bpoly</strong> (<em>Polygon</em><em> or </em><em>MultiPolygon</em>) – A Shapely Polygon or MultiPolygon to plot.</p></li>
<li><p><strong>rectangles</strong> (<em>list</em><em>[</em><em>Polygon</em><em>]</em>) – A list of Shapely Polygon objects representing the rectangular
cells that mesh input polygon.</p></li>
<li><p><strong>output_file</strong> (<em>str</em><em>, </em><em>optional</em>) – Filename to save the plot as a PNG image. If empty string, the
plot is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">output_file</span></code> is provided and an invalid filename is
    given.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cells</span> <span class="o">=</span> <span class="n">GeoTools</span><span class="o">.</span><span class="n">mesh_polygon</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">plot_polygon_cells</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">cells</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">plot_polygon_cells</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">poly</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cells</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;mesh_plot.png&#39;</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="brails.utils.geo_tools.GeoTools.write_polygon_to_geojson">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_polygon_to_geojson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">poly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#brails.utils.geo_tools.GeoTools.write_polygon_to_geojson" title="Link to this definition"></a></dt>
<dd><p>Write a Shapely Polygon or MultiPolygon to a GeoJSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>poly</strong> (<em>Polygon</em><em> or </em><em>MultiPolygon</em>) – A Shapely Polygon or MultiPolygon to be written.</p></li>
<li><p><strong>output_file</strong> (<em>str</em>) – The output filename for the GeoJSON file.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This method does not perform validation on the geometry.</p></li>
<li><p>The file extension will be replaced with ‘.geojson’ if not
present.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span><span class="p">,</span> <span class="n">MultiPolygon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">write_polygon_to_geojson</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="s1">&#39;my_polygon.geojson&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">poly1</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">poly2</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpoly</span> <span class="o">=</span> <span class="n">MultiPolygon</span><span class="p">([</span><span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoTools</span><span class="o">.</span><span class="n">write_polygon_to_geojson</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">mpoly</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;my_multipolygon.geojson&#39;</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="brails.utils.arcgisapi_service_helper.html" class="btn btn-neutral float-left" title="brails.utils.arcgisapi_service_helper module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="brails.utils.importer.html" class="btn btn-neutral float-right" title="brails.utils.importer module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024; Licensed under BSD 3-Clause.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>